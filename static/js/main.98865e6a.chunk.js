(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{105:function(e,t,n){},106:function(e,t,n){"use strict";n.r(t);var c,r=n(0),s=n.n(r),o=n(36),a=n.n(o),i=n(21),j=n(25),l=n(38),u=Object(l.c)({name:"user",initialState:{email:null,token:null,id:null},reducers:{setUser:function(e,t){e.email=t.payload.email,e.token=t.payload.token,e.id=t.payload.id},removeUser:function(e){e.email=null,e.token=null,e.id=null}}}),d=u.actions,b=d.setUser,h=d.removeUser,p=u.reducer,O=n(4),x=n(1),m=n.n(x),f=n(5),v=Object(l.b)("todos/fetchPosts",function(){var e=Object(f.a)(m.a.mark((function e(t,n){var c,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.rejectWithValue,e.prev=1,e.next=4,fetch("https://jsonplaceholder.typicode.com/posts");case 4:if((r=e.sent).ok){e.next=7;break}throw new Error("Server Error!");case 7:return e.next=9,r.json();case 9:return s=e.sent,e.abrupt("return",s);case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",c(e.t0.message));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,n){return e.apply(this,arguments)}}()),g=Object(l.b)("todos/deletePost",function(){var e=Object(f.a)(m.a.mark((function e(t,n){var c,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.rejectWithValue,r=n.dispatch,e.prev=1,e.next=4,fetch("https://jsonplaceholder.typicode.com/todos/".concat(t),{method:"DELETE"});case 4:if(e.sent.ok){e.next=7;break}throw new Error("Can't delete task. Server error.");case 7:r(T({id:t})),e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",c(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),y=Object(l.b)("todos/toggleStatus",function(){var e=Object(f.a)(m.a.mark((function e(t,n){var c,r,s,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.rejectWithValue,r=n.dispatch,s=n.getState,o=s().todos.todos.find((function(e){return e.id===t})),e.prev=2,e.next=5,fetch("https://jsonplaceholder.typicode.com/todos/".concat(t),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({completed:!o.completed})});case 5:if(e.sent.ok){e.next=8;break}throw new Error("Can't toggle status. Server error.");case 8:r(E({id:t})),e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(2),e.abrupt("return",c(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n){return e.apply(this,arguments)}}()),k=(Object(l.b)("todos/addNewPost",function(){var e=Object(f.a)(m.a.mark((function e(t,n){var c,r,s,o,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.rejectWithValue,r=n.dispatch,e.prev=1,s={title:t,userId:1,completed:!1},e.next=5,fetch("https://jsonplaceholder.typicode.com/todos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});case 5:if((o=e.sent).ok){e.next=8;break}throw new Error("Can't add task. Server error.");case 8:return e.next=10,o.json();case 10:a=e.sent,r(S(a)),e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(1),e.abrupt("return",c(e.t0.message));case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,n){return e.apply(this,arguments)}}()),function(e,t){e.status="rejected",e.error=t.payload}),w=Object(l.c)({name:"posts",initialState:{posts:[],status:null,error:null},reducers:{addPost:function(e,t){e.posts.push(t.payload)},toggleComplete:function(e,t){var n=e.posts.find((function(e){return e.id===t.payload.id}));n.completed=!n.completed},removePost:function(e,t){e.posts=e.posts.filter((function(e){return e.id!==t.payload.id}))}},extraReducers:(c={},Object(O.a)(c,v.pending,(function(e){e.status="loading",e.error=null})),Object(O.a)(c,v.fulfilled,(function(e,t){e.status="resolved",e.posts=t.payload})),Object(O.a)(c,v.rejected,k),Object(O.a)(c,g.rejected,k),Object(O.a)(c,y.rejected,k),c)}),C=w.actions,S=C.addPost,E=C.toggleComplete,T=C.removePost,I=w.reducer,P=Object(l.a)({reducer:{user:p,posts:I}}),A=n(19);function L(){var e=Object(j.c)((function(e){return e.user})),t=e.email;return{isAuth:!!t,email:t,token:e.token,id:e.id}}var W=n(2),B=function(){var e=Object(A.h)(),t=Object(j.b)(),n=L(),c=n.isAuth,r=n.email;return c?Object(W.jsxs)("div",{children:[Object(W.jsx)("h1",{children:"Welcome"}),Object(W.jsxs)("button",{onClick:function(){t(h()),e("/",{replace:!0})},children:["Log out from ",r]})]}):Object(W.jsx)(A.a,{to:"/login"})},F=n(48),U=n(15),D=n(139),G=n(143),J=function(e){var t=e.title,n=e.handleClick,c=Object(r.useState)(""),s=Object(U.a)(c,2),o=s[0],a=s[1],i=Object(r.useState)(""),j=Object(U.a)(i,2),l=j[0],u=j[1];return Object(W.jsxs)("div",{children:[Object(W.jsx)(D.a,{label:"email",variant:"standard",type:"email",value:o,onChange:function(e){return a(e.target.value)},sx:{mb:"1.5rem",mt:"10px",ml:"10px"}}),Object(W.jsx)(D.a,{label:"password",variant:"standard",type:"password",value:l,onChange:function(e){return u(e.target.value)},sx:{mb:"1.5rem",mt:"10px",ml:"10px"}}),Object(W.jsxs)(G.a,{variant:"contained",onClick:function(){return n(o,l)},sx:{mt:"15px",ml:"10px"},children:[" ",t]})]})},N=function(){var e=Object(j.b)(),t=Object(A.h)();return Object(W.jsx)(J,{title:"sign in",handleClick:function(n,c){var r=Object(F.b)();Object(F.c)(r,n,c).then((function(n){var c=n.user;console.log(c),localStorage.setItem("jwt",c.accessToken),e(b({email:c.email,id:c.uid,token:c.accessToken})),t("/")})).catch((function(){return alert("Invalid user!")}))}})},Q=function(){return Object(W.jsxs)("div",{children:[Object(W.jsx)("h1",{children:"Login"}),Object(W.jsx)(N,{}),Object(W.jsxs)("p",{children:["Or ",Object(W.jsx)(i.b,{to:"/register",children:"register"})]}),Object(W.jsx)("p",{children:"Login: test@test.com password: 123456"})]})},V=function(){var e=Object(j.b)(),t=Object(A.h)();return Object(W.jsx)(J,{title:"register",handleClick:function(n,c){var r=Object(F.b)();console.log(r),Object(F.a)(r,n,c).then((function(n){var c=n.user;console.log(c),localStorage.setItem("jwt",c.accessToken),e(b({email:c.email,id:c.uid,token:c.accessToken})),t("/")})).catch(console.error)}})},H=function(){return Object(W.jsxs)("div",{children:[Object(W.jsx)("h1",{children:"Register"}),Object(W.jsx)(V,{}),Object(W.jsxs)("p",{children:["Already have an account? ",Object(W.jsx)(i.b,{to:"/login",children:"Sign in"})]})]})},K=function(){return Object(W.jsxs)("div",{children:[Object(W.jsx)("h1",{children:"About us"}),Object(W.jsx)("p",{children:"This is a demo website."}),Object(W.jsxs)("ul",{children:[Object(W.jsx)("li",{children:Object(W.jsx)(i.b,{to:"contacts",children:"Our Contacts"})}),Object(W.jsx)("li",{children:Object(W.jsx)(i.b,{to:"team",children:"Our Team"})})]}),Object(W.jsx)(A.b,{})]})},z=n(146),M=n(141),R=function(e){var t=e.postQuery,n=e.latest,c=e.setSearchParams,s=Object(r.useState)(t),o=Object(U.a)(s,2),a=o[0],i=o[1],j=Object(r.useState)(n),l=Object(U.a)(j,2),u=l[0],d=l[1],b=function(e){e.preventDefault();var t=a,n=u,r={};t.length&&(r.post=t),n&&(r.latest=!0),c(r)};return Object(W.jsxs)("form",{autoComplete:"off",onSubmit:b,children:[Object(W.jsx)(D.a,{label:"search",variant:"standard",type:"search",value:a,onChange:function(e){return i(e.target.value)},sx:{width:"90%"}}),Object(W.jsx)(G.a,{variant:"contained",onClick:b,sx:{mt:"10px",ml:"10px"},children:"Search"}),Object(W.jsx)(z.a,{control:Object(W.jsx)(M.a,{checked:u,onChange:function(e){return d(e.target.checked)}}),label:"New only"})]})},Y=n(144),q=n(148),X=n(149),Z=n(147),$=n(150),_=function(e){var t=e.post;return Object(W.jsx)(Y.a,{item:!0,xs:12,md:4,children:Object(W.jsxs)(q.a,{sx:{height:"100%",minWidth:275,display:"flex",justifyContent:"space-between",flexDirection:"column"},children:[Object(W.jsxs)(X.a,{children:[Object(W.jsxs)(Z.a,{variant:"h6",component:"h3",children:["Id ",t.id]}),Object(W.jsx)(Z.a,{variant:"body2",color:"text.secondary",children:t.title})]}),Object(W.jsx)($.a,{children:Object(W.jsx)(i.b,{to:"/posts/".concat(t.id),children:Object(W.jsx)(G.a,{children:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c"})})})]})})},ee=function(e){var t=e.postQuery,n=e.startsFrom,c=Object(j.c)((function(e){return e.posts.posts}));return console.log(c),Object(W.jsx)(Y.a,{container:!0,spacing:2,children:c.filter((function(e){return e.title.includes(t)&&e.id>=n})).map((function(e){return Object(W.jsx)(_,{post:e},e.id)}))})},te=function(){var e=Object(j.b)(),t=Object(j.c)((function(e){return e.posts})),n=t.posts,c=t.status,s=t.error,o=Object(i.c)(),a=Object(U.a)(o,2),l=a[0],u=a[1],d=l.get("post")||"",b=l.has("latest"),h=b?80:1;return Object(r.useEffect)((function(){e(v())}),[e]),Object(W.jsxs)("div",{children:[Object(W.jsx)("h1",{children:"Our news"}),Object(W.jsx)(R,{postQuery:d,latest:b,setSearchParams:u}),Object(W.jsx)(i.b,{to:"/posts/new",style:{margin:"1rem 0",display:"inline-block"},children:Object(W.jsx)(G.a,{color:"inherit",children:"Add new post"})}),"loading"===c&&Object(W.jsx)("h2",{children:"Loading..."}),s&&Object(W.jsxs)("h2",{children:["An error occured: ",s]}),n&&Object(W.jsx)(ee,{postQuery:d,startsFrom:h})]})},ne=function(){Object(A.h)(),Object(j.b)();return Object(W.jsx)("div",{children:Object(W.jsx)("h1",{children:"Create a post"})})},ce=function(){var e=Object(A.i)().id;return Object(W.jsx)("div",{children:Object(W.jsxs)("h1",{children:["Edit post ",e]})})},re=function(){var e=Object(A.i)().id,t=Object(A.h)(),n=Object(r.useState)(null),c=Object(U.a)(n,2),s=c[0],o=c[1];return Object(r.useEffect)((function(){fetch("https://jsonplaceholder.typicode.com/posts/".concat(e)).then((function(e){return e.json()})).then((function(e){return o(e)}))}),[e]),Object(W.jsxs)("div",{children:[Object(W.jsx)("button",{onClick:function(){return t(-1)},children:"Go back"}),Object(W.jsx)("button",{onClick:function(){return t("/",{replace:!0})},children:"Go home"}),s&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("h1",{children:s.title}),Object(W.jsx)("p",{children:s.body}),Object(W.jsx)(i.b,{to:"/posts/".concat(e,"/edit"),children:"Edit this post"})]})]})},se=function(){return Object(W.jsxs)("div",{children:["This page doesn't exist. Go ",Object(W.jsx)(i.b,{to:"/",children:"home"})]})},oe=n(153),ae=function(){return Object(W.jsx)("div",{style:{position:"fixed",bottom:0,left:850,paddingBottom:10},children:Object(W.jsx)(Z.a,{children:"Footer \xa92021"})})},ie=n(151),je=n(152),le=function(){var e=Object(A.h)();return Object(W.jsx)(ie.a,{position:"static",children:Object(W.jsxs)(je.a,{children:[Object(W.jsx)(Z.a,{variant:"h6",component:"span",sx:{mr:"30px"},children:"Logo"}),Object(W.jsx)(G.a,{onClick:function(){return e("/")},sx:{my:2,color:"white",display:"block"},children:" Home "}),Object(W.jsx)(G.a,{onClick:function(){return e("/posts")},sx:{my:2,color:"white",display:"block"},children:" Blog "}),Object(W.jsx)(G.a,{onClick:function(){return e("/about")},sx:{my:2,color:"white",display:"block"},children:" About "})]})})},ue=function(){return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(le,{}),Object(W.jsx)(oe.a,{sx:{mt:"5rem"},children:Object(W.jsx)(A.b,{})}),Object(W.jsx)(ae,{})]})},de=function(e){var t=e.children,n=Object(A.g)();return L().isAuth?t:Object(W.jsx)(A.a,{to:"/login",state:{from:n}})};var be=function(){return Object(W.jsx)(A.e,{children:Object(W.jsxs)(A.c,{path:"/",element:Object(W.jsx)(ue,{}),children:[Object(W.jsx)(A.c,{index:!0,element:Object(W.jsx)(B,{})}),Object(W.jsxs)(A.c,{path:"about",element:Object(W.jsx)(K,{}),children:[Object(W.jsx)(A.c,{path:"contacts",element:Object(W.jsx)("p",{children:"Our contact"})}),Object(W.jsx)(A.c,{path:"team",element:Object(W.jsx)("p",{children:"Our team"})})]}),Object(W.jsx)(A.c,{path:"about-us",element:Object(W.jsx)(A.a,{to:"/about",replace:!0})}),Object(W.jsx)(A.c,{path:"posts",element:Object(W.jsx)(te,{})}),Object(W.jsx)(A.c,{path:"posts/:id",element:Object(W.jsx)(re,{})}),Object(W.jsx)(A.c,{path:"posts/:id/edit",element:Object(W.jsx)(ce,{})}),Object(W.jsx)(A.c,{path:"posts/new",element:Object(W.jsx)(de,{children:Object(W.jsx)(ne,{})})}),Object(W.jsx)(A.c,{path:"login",element:Object(W.jsx)(Q,{})}),Object(W.jsx)(A.c,{path:"register",element:Object(W.jsx)(H,{})}),Object(W.jsx)(A.c,{path:"*",element:Object(W.jsx)(se,{})})]})})},he=(n(105),n(82));Object(he.a)({apiKey:"AIzaSyCHdShKKcY9sn0BC6zPqoXG6Iw15pn-TcY",authDomain:"my-next-app-6e460.firebaseapp.com",projectId:"my-next-app-6e460",storageBucket:"my-next-app-6e460.appspot.com",messagingSenderId:"908069987697",appId:"1:908069987697:web:2ea5891e93a335c586c2d0"});a.a.render(Object(W.jsx)(s.a.StrictMode,{children:Object(W.jsx)(i.a,{basename:"/react-blog-MUI",children:Object(W.jsx)(j.a,{store:P,children:Object(W.jsx)(be,{})})})}),document.getElementById("root"))}},[[106,1,2]]]);
//# sourceMappingURL=main.98865e6a.chunk.js.map